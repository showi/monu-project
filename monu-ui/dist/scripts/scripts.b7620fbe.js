"use strict";angular.module("monoApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch","schemaForm","angular-json-editor"]).config(["$routeProvider","JSONEditorProvider",function(a,b){a.when("/",{templateUrl:"views/recipe.html",controller:"RecipeCtrl",controllerAs:"recipe"}).when("/recipe/view",{templateUrl:"views/recipe.html",controller:"RecipeCtrl",controllerAs:"recipe"}).when("/recipe/view/:key/:value",{templateUrl:"views/recipe-view.html",controller:"RecipeCtrl",controllerAs:"recipe"}).when("/recipe/edit/:key/:value",{templateUrl:"views/recipe-edit.html",controller:"RecipeCtrl",controllerAs:"recipe"}).when("/tag/view",{templateUrl:"views/tag.html",controller:"TagCtrl",controllerAs:"tag"}).when("/tag/view/:key/:value",{templateUrl:"views/tag-view.html",controller:"TagCtrl",controllerAs:"tag"}).when("/tag/edit/:key/:value",{templateUrl:"views/tag-edit.html",controller:"TagCtrl",controllerAs:"tag"}).when("/ingredient/view",{templateUrl:"views/ingredient.html",controller:"IngredientCtrl",controllerAs:"ingredient"}).when("/ingredient/view/:key/:value",{templateUrl:"views/ingredient-view.html",controller:"IngredientCtrl",controllerAs:"ingredient"}).when("/ingredient/edit/:key/:value",{templateUrl:"views/ingredient-edit.html",controller:"IngredientCtrl",controllerAs:"ingredient"}).otherwise({redirectTo:"/"}),b.configure({plugins:{sceditor:{style:"sce/development/jquery.sceditor.default.css"}},defaults:{options:{iconlib:"bootstrap3",theme:"bootstrap3",ajax:!0}}})}]),angular.module("monoApp").controller("MainCtrl",["$route",function(a){this.$route=a}]),angular.module("monoApp").service("Ingredient",["$http","Util",function(a,b){var c=this,d="/api/ingredient";c.get=function(c,e){return e=void 0===e?"GET":e,c=void 0!==c?b.join(d,c):d,a({method:e,url:c})}}]),angular.module("monoApp").controller("IngredientCtrl",["$route","$scope","Ingredient","Tag","Schema","Util","HasIngredient",function(a,b,c,d,e,f,g){var h=this;h.data=[],h.TagService=d,h.related=[],h.get=function(a){c.get(a).then(function(a){if(200!==a.status&&console.error("Cannot get ingredient: %s (%s)",a.status_text,a.config.url),angular.copy(a.data,h.data),1==h.data.length)for(var b,c=0;c<h.data.length,b=h.data[c];c++)f.isEmpty(b._id)||g.get("recipe","_id",b._id).then(function(a){for(var b,c=0;c<a.data.length,b=a.data[c];c++)h.related.push(b)})})},h._init=function(){var b=a.current.$$route.originalPath;0===b.indexOf("/ingredient/edit/:key/:value")?(h.Schema=e.get("/ingredient"),h.StartVal=c.get(f.join(a.current.params.key,a.current.params.value)).then(function(a){return a.data})):0===b.indexOf("/ingredient/view/:key/:value")?h.get(f.join(a.current.params.key,a.current.params.value)):h.get()},h._init()}]),angular.module("monoApp").service("Schema",["$http","Util",function(a,b){var c=this,d="/api/schema";c.get=function(c,e){return e=void 0===e?"GET":e,c=void 0!==c?b.join(d,c):d,a({method:e,url:c})}}]),angular.module("monoApp").service("Tag",["$http","Util",function(a,b){var c=this,d="/api/tag";c.get=function(c,e){return e=void 0===e?"GET":e,c=void 0!==c?b.join(d,c):d,a({method:e,url:c})}}]),angular.module("monoApp").controller("TagCtrl",["$route","$scope","Tag","Schema","Util","HasTag",function(a,b,c,d,e,f){var g=this;g.data=[],g.related=[],g.get=function(a){c.get(a).then(function(a){if(200!==a.status)console.error("Cannot get tag: %s (%s)",a.status_text,a.config.url);else if(angular.copy(a.data,g.data),1==g.data.length)for(var b,c=0;c<g.data.length,b=g.data[c];c++)e.isEmpty(b._id)||f.get("recipe","_id",b._id).then(function(a){for(var b,c=0;c<a.data.length,b=a.data[c];c++)g.related.push(b)})})},g._init=function(){var b=a.current.$$route.originalPath;0===b.indexOf("/tag/edit/:key/:value")?(g.Schema=d.get("/tag"),g.StartVal=c.get(e.join(a.current.params.key,a.current.params.value)).then(function(a){return a.data})):0===b.indexOf("/tag/view/:key/:value")?g.get(e.join(a.current.params.key,a.current.params.value)):g.get()},g._init()}]),angular.module("monoApp").controller("RecipeCtrl",["$route","$scope","Recipe","Ingredient","Tag","Schema","Util","HasTag",function(a,b,c,d,e,f,g,h){var i=this;i.data=[],i.TagService=e,i.get=function(a){c.get(a).then(function(a){200!==a.status&&console.error("Cannot get recipe: %s (%s)",a.status_text,a.config.url),angular.copy(c.restructure(a.data),i.data)})},i._init=function(){var b=a.current.$$route.originalPath;0===b.indexOf("/recipe/edit/:key/:value")?(i.Schema=f.get("/recipe"),i.StartVal=c.get(g.join(a.current.params.key,a.current.params.value)).then(function(a){return a.data})):0===b.indexOf("/recipe/view/:key/:value")?i.get(g.join(a.current.params.key,a.current.params.value)):i.get()},i._init()}]),angular.module("monoApp").service("Recipe",["$http","Util",function(a,b){var c=this,d="/api/recipe";c.get=function(c,e){return e=void 0===e?"GET":e,c=void 0!==c?b.join(d,c):d,a({method:e,url:c})},c.restructure=function(a){Array.isArray(a)||(a=[a]);for(var b,c=0;c<a.length,b=a[c];c++)if(void 0!==b.child&&Array.isArray(b.child)){b.child_recipe=[];for(var d,c=0;c<b.child,d=b.child[c];c++)b.child_recipe.push(d)}return a}}]),angular.module("monoApp").service("Util",function(){return{isEmpty:function(a){if(void 0===a)return!0;if("string"==typeof a)return""==a?!0:!1;throw"Using isEmpty on unsupported data type"},join:function(){return[].join.call(arguments,"/")}}}),angular.module("monoApp").service("HasTag",["$http","Util",function(a,b){var c=this,d="/api/has/tag";c.get=function(c,e,f,g){g=void 0===g?"GET":g;var h=b.join(d,c,e,f);return a({method:g,url:h})}}]),angular.module("monoApp").service("HasIngredient",["$http","Util",function(a,b){var c=this,d="/api/has/ingredient";c.get=function(c,e,f,g){g=void 0===g?"GET":g;var h=b.join(d,c,e,f);return a({method:g,url:h})}}]),angular.module("monoApp").run(["$templateCache",function(a){a.put("views/ingredient-edit.html",'<div> <json-editor schema="ingredient.Schema" startval="ingredient.StartVal" on-change="ingredient.onChange($editorValue)"></json-editor> </div>'),a.put("views/ingredient-view.html",'<div class="row"> <ul style="list-style: lower-greek"> <li ng-repeat="doc in ingredient.data | orderBy: \'name\'"> <a class="" style="text-transform: capitalize" ng-href="#/ingredient/view/_id/{{doc._id}}"><span>{{doc.name}}</span> </a> <ul style="display: inline-block; text-decoration: none" class="pull-right"> <li class="" ng-repeat="tag in doc.tag track by $index" style="display: inline; text-align: right"> <a style="font-size: xx-small" class="label label-pill label-info" ng-href="#/tag/view/_id/{{tag._id}}">{{tag.name}}</a> </li> </ul> <ul> <li class="" style="display: block; text-decoration: none" ng-repeat="related in ingredient.related"> <span class="col-md-10"><a ng-href="#/recipe/view/_id/{{related._id}}">{{related.name}}</a></span> <a class="hide btn btn-sm bnt-info" ng-href="#/tag/edit@/_id/{{doc._id }}">edit</a> </li> </ul> </li> </ul> </div>'),a.put("views/ingredient.html",'<div class="row"> <ul style="list-style: lower-greek"> <li ng-repeat="doc in ingredient.data | orderBy: \'name\'"> <a class="" style="text-transform: capitalize" ng-href="#/ingredient/view/_id/{{doc._id}}"><span>{{doc.name}}</span> </a> <ul style="display: inline-block; text-decoration: none" class="pull-right"> <li class="" ng-repeat="tag in doc.tag track by $index" style="display: inline; text-align: right"> <a style="font-size: xx-small" class="label label-pill label-info" ng-href="#/tag/view/_id/{{tag._id}}">{{tag.name}}</a> </li> </ul> </li> </ul> </div>'),a.put("views/main.html",'<div class="jumbotron"> <h1>\'Allo, \'Allo!</h1> <p class="lead"> <img src="images/yeoman.8cb970fb.png" alt="I\'m Yeoman"><br> Always a pleasure scaffolding your apps. </p> <p><a class="btn btn-lg btn-success" ng-href="#/">Splendid!<span class="glyphicon glyphicon-ok"></span></a></p> </div> <div class="row marketing"> <h4>HTML5 Boilerplate</h4> <p> HTML5 Boilerplate is a professional front-end template for building fast, robust, and adaptable web apps or sites. </p> <h4>Angular</h4> <p> AngularJS is a toolset for building the framework most suited to your application development. </p> <h4>Karma</h4> <p>Spectacular Test Runner for JavaScript.</p> </div>'),a.put("views/recipe-edit.html",'<div> <json-editor schema="recipe.Schema" startval="recipe.StartVal" on-change="recipe.onChange($editorValue)"></json-editor> </div>'),a.put("views/recipe-view.html",'<div ng-repeat="doc in recipe.data | orderBy: \'name\'" class="container-fluid"> <div class="row"> <span class="col-sm-8" style="text-transform: capitalize"> <a ng-href="#/recipe/view/_id/{{doc._id}}">{{doc.name}}</a> </span> <span class="col-sm-4"> <a class="hide btn btn-md bnt-info" ng-href="#/recipe/edit/_id/{{doc._id}}">edit</a> </span> </div> <div> <div class="col-sm-12"> <span ng-repeat="tag in doc.tag track by $index" class="label"><a ng-href="#/tag/view/_id/{{tag._id}}">{{tag.name}}</a></span> </div> <div class="col-sm-12"> <ul style="display: inline-block;list-style: lower-greek"> <li ng-repeat="ingredient in doc.ingredient track by $index"> <span style="font-size: small; font-style: italic; font-weight: bold"><a ng-href="#/ingredient/view/_id/{{ingredient._id}}">{{ingredient.name}}</a></span> &nbsp;<span style="font-size: small">{{ingredient.quantity}}&nbsp<span style="font-style: italic">{{ingredient.mesure}}</span></span> </li> </ul> <div ng-if="doc.child_recipe !== undefined"> <span style="font-size: small">Recette li√©e</span> <ul> <li ng-repeat="recipe in doc.child_recipe"> <div ng-controller="RecipeCtrl as rc" ng-include="views/recipe-view.html"> </div> <a ng-href="#/recipe/view/_id/{{recipe._id}}">{{recipe.name}}</a> </li> </ul> </div> <ul> <li ng-repeat="step in doc.step track by $index"> <span style="font-size: small; font-style: oblique; font-weight: bold; text-decoration: dashed">{{step.title}}</span> &nbsp;<span style="font-size: x-small">({{step.duration}}s)</span> <p>{{step.text}}</p> </li> </ul> </div> </div> </div>'),a.put("views/recipe.html",'<div class="row"> <ul style="list-style: lower-greek"> <li ng-repeat="doc in recipe.data | orderBy: \'name\'"> <a class="" style="text-transform: capitalize" ng-href="#/recipe/view/_id/{{doc._id}}"><span>{{doc.name}}</span> </a> <ul style="display: inline-block; text-decoration: none" class="pull-right"> <li class="" ng-repeat="tag in doc.tag track by $index" style="display: inline; text-align: right"> <a style="font-size: xx-small" class="label label-pill label-info" ng-href="#/tag/view/_id/{{tag._id}}">{{tag.name}}</a> </li> </ul> </li> </ul> </div>'),a.put("views/tag-edit.html",'<div> <json-editor schema="tag.Schema" startval="tag.StartVal" on-change="tag.onChange($editorValue)"></json-editor> </div>'),a.put("views/tag-view.html",'<div class="row"> <ul style="list-style: lower-greek"> <li ng-repeat="doc in tag.data | orderBy: \'name\'"> <a class="" style="text-transform: capitalize" ng-href="#/tag/view/_id/{{doc._id}}"><span>{{doc.name}}</span> </a> <ul> <li class="" style="display: block; text-decoration: none" ng-repeat="related in tag.related"> <span class="col-md-10"><a ng-href="#/recipe/view/_id/{{related._id}}">{{related.name}}</a></span> <a class="hide btn btn-sm bnt-info" ng-href="#/tag/edit@/_id/{{doc._id }}">edit</a> </li> </ul> </li> </ul> </div>'),a.put("views/tag.html",'<div class="row"> <ul style="list-style: lower-greek"> <li ng-repeat="doc in tag.data | orderBy: \'name\'"> <a class="" style="text-transform: capitalize" ng-href="#/recipe/view/_id/{{doc._id}}"><span>{{doc.name}}</span> </a> </li> </ul> </div>')}]);